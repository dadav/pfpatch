---
files:
  gameserver:
    default: SR_Gameserver.exe
  gateway:
    default: GatewayServer.exe
  sro_client:
    default: sro_client.exe
  shardmanager:
    default: SR_ShardManager.exe

patches:
  - name: Max characters per account
    description: |
      Adjust the number of characters per account
    editable: true
    file: sro_client
    changes:
      - offset: 0x85de67 + 6
        size: 1
      - offset: 0x40F47C + 2
        size: 1
        file: shardmanager
      - offset: 0x429B83 + 2
        size: 1
        file: shardmanager
  - name: Max job level
    description: |
      Adjust the max job level.
    editable: true
    file: gameserver
    changes:
      - offset: 0x60de69 + 3
        size: 1
  - name: Job leaving penalty
    description: |
      The days of penalty for leaving a job.
    editable: true
    file: gameserver
    changes:
      - offset: 0x4e816c + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
  - name: Guild leaving penalty
    description: |
      The days of penalty for leaving a guild.
    editable: true
    file: gameserver
    changes:
      - offset: 0x5c3f94 + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
      - offset: 0x9df194 + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
      - offset: 0x5c8b3d + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
  - name: Level cap
    description: |
      The max level on this server.
    editable: true
    file: gameserver
    changes:
      # player
      - offset: 0x4e52c7 + 2
        size: 1
      # pet
      - offset: 0x4d641b + 3
        size: 1
      - offset: 0x8A99A2 + 2
        size: 1
        file: sro_client
  - name: Quest level cap
    description: |
      The max quest level on this server.
    editable: true
    file: sro_client
    changes:
      - offset: 0x955134 + 3
        size: 1
  - name: Party matching filter level
    description: |
      The max level filter for party matching.
    editable: true
    file: sro_client
    changes:
      - offset: 0x73940e + 1
        size: 1
      - offset: 0x739453 + 1
        size: 1
      - offset: 0x73afae + 1
        size: 1
      - offset: 0x73b013 + 1
        size: 1
      - offset: 0x73b030 + 1
        size: 1
      - offset: 0x73fa4c + 1
        size: 1
      - offset: 0x73FAAF + 1
        size: 1
      - offset: 0x73facc + 1
        size: 1
  - name: Fix gameserver crash after level 110
    description: |
      After level 110 the gameserver crashes sometimes. This fixes it.
    editable: false
    file: gameserver
    changes:
      - offset: 0x4E5471 + 4
        value: "E0"
  - name: Max mastery level (CH)
    description: |
      The max mastery level of CH characters.
    editable: true
    file: gameserver
    changes:
      - offset: 0x59c5e6 + 1
        size: 4
      - offset: 0x6A51BC + 1
        size: 4
        file: sro_client
  - name: Max mastery level (EU)
    description: |
      The max mastery level of EU characters.
    editable: true
    file: sro_client
    changes:
      - offset: 0x6A5197 + 1
        size: 4
      - offset: 0x6A51A2 + 1
        size: 4
      - offset: 0x6AA498 + 1
        size: 4
      - offset: 0x6AA4A3 + 1
        size: 4
      - offset: 0x59C570
        value: "81 F9"
        file: gameserver
      - offset: 0x59C572
        size: 4
        file: gameserver
      - offset: 0x59C576
        value: "7F 54 EB 11 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90"
        file: gameserver
  - name: Party mobs spawn probability
    description: |
      How often a mob should spawn as party type (in %).
    editable: true
    file: gameserver
    changes:
      - offset: 0x5608e2 + 2
        size: 1
  - name: Party mobs member requirement
    description: |
      How many players need to be in a party for party monster to spawn.
    editable: true
    file: gameserver
    changes:
      - offset: 0x558F20 + 4
        size: 1
  - name: Gameserver spawn limit
    description: |
      How many mobs can spawn.
    editable: true
    file: gameserver
    changes:
      - offset: 0x54d609 + 1
        size: 4
      - offset: 0x54d61c + 3
        size: 4
      - offset: 0x54d654 + 1
        size: 4
      - offset: 0x54d662 + 2
        size: 4
      - offset: 0x54d6d8 + 2
        size: 4
        formula: "value * 0x1D0"
  - name: Disable Quest:RaiseEvent errors
    description: |
      Removes the Quest:RaiseEvent errors to reduce load.
    editable: false
    file: gameserver
    changes:
      - offset: 0x5805C8
        value: "90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90"
  - name: Disable green book
    description: |
      Removes the green book from the gameserver.
    editable: false
    file: gameserver
    changes:
      - offset: 0x4142E8
        value: "90 90"
  - name: Disable login captcha
    description: |
      Removes the login captcha.
    editable: false
    file: gateway
    changes:
      - offset: 0x40509c + 1
        value: "30 6e 40"
