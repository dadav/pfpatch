---
files:
  gameserver:
    default: SR_Gameserver.exe
  gateway:
    default: GatewayServer.exe
  sro_client:
    default: sro_client.exe
  shardmanager:
    default: SR_ShardManager.exe

patches:
  - name: Max characters per account
    group: Character Limits
    description: |
      Adjust the number of characters per account
      ("SRO_VT_SHARD.dbo._AddNewChar" MODIFICATION REQUIRED: remove if condition)
    editable: true
    file: sro_client
    changes:
      - offset: 0x85de67 + 6
        size: 1
      - offset: 0x40F47C + 2
        size: 1
        file: shardmanager
      - offset: 0x429B83 + 2
        size: 1
        file: shardmanager
  - name: Union participants limit
    group: Guild
    description: |
      Adjust the max number of guilds in a union.
    editable: true
    file: shardmanager
    changes:
      - offset: 0x434311 + 1
        size: 1
  - name: PK level requirement
    group: Character Limits
    description: |
      Adjust the level requirement of PK.
    editable: true
    file: gameserver
    changes:
      - offset: 0x5295DA + 1
        size: 1
  - name: Magic item drop probability
    group: Items
    description: |
      Adjust the probability of magic item drops.
    editable: true
    file: gameserver
    changes:
      - offset: 0x727784 + 2
        size: 1
  - name: Min participants in CTF
    group: Events
    description: |
      Min number of participants in CTF.
    editable: true
    file: shardmanager
    changes:
      - offset: 0x672891 + 4
        size: 1
  - name: Min participants in BA
    group: Events
    description: |
      Min number of participants in battle arena.
    editable: true
    file: shardmanager
    changes:
      - offset: 0x66A1B0 + 4
        size: 1
  - name: Fix 1h dc bug
    group: Bug Fixes
    description: |
      Fixes the disconnect issue after 1h.
    editable: false
    file: shardmanager
    changes:
      - offset: 0x45055C
        value: "EB 30 90 90 90"
  - name: Multiclient
    group: Client Modifications
    description: |
      Enables multiclient
    editable: false
    file: sro_client
    changes:
      - offset: 0x83297F
        value: "EB"
  - name: Remove xtrap
    group: Client Modifications
    description: |
      Removes xtrap...
    editable: false
    file: sro_client
    changes:
      - offset: 0x844AEF
        value: "EB"
      - offset: 0x8328C3
        value: "90 90 90 90 90"
      - offset: 0xB7AEF0
        value: "90"
        repeat: 0x14FF
  - name: Max job level
    group: Job
    description: |
      Adjust the max job level.
    editable: true
    file: gameserver
    changes:
      - offset: 0x60de69 + 3
        size: 1
  - name: Job leaving penalty
    group: Job
    description: |
      The days of penalty for leaving a job.
    editable: true
    file: gameserver
    changes:
      - offset: 0x4e816c + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
  - name: Guild leaving penalty
    group: Guild
    description: |
      The days of penalty for leaving a guild.
    editable: true
    file: gameserver
    changes:
      - offset: 0x5c3f94 + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
      - offset: 0x9df194 + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
      - offset: 0x5c8b3d + 1
        size: 4
        display_formula: "value / (24 * 60 * 60)"
        input_formula: "value * 24 * 60 * 60"
  - name: Level cap
    group: Character Limits
    description: |
      The max level on this server.
    editable: true
    file: gameserver
    changes:
      # level up limit
      - offset: 0x8A99A2 + 2
        size: 1
        file: sro_client
      # mastery limit
      - offset: 0x69C7C8 + 1
        size: 1
        file: sro_client
      # max skill
      - offset: 0x9448b1 + 6
        size: 1
        file: sro_client
      # player
      - offset: 0x4e52c7 + 2
        size: 1
      # pet
      - offset: 0x4d641b + 3
        size: 1
      # exp fix
      - offset: 0x4E5471 + 4
        size: 2
        formula: "(value - 1) * 4"
  - name: Quest level cap
    group: Character Limits
    description: |
      The max quest level on this server.
    editable: true
    file: sro_client
    changes:
      - offset: 0x955134 + 3
        size: 1
  - name: Party matching filter level
    group: Party
    description: |
      The max level filter for party matching.
    editable: true
    file: sro_client
    changes:
      - offset: 0x73940e + 1
        size: 1
      - offset: 0x739453 + 1
        size: 1
      - offset: 0x73afae + 1
        size: 1
      - offset: 0x73b013 + 1
        size: 1
      - offset: 0x73b030 + 1
        size: 1
      - offset: 0x73fa4c + 1
        size: 1
      - offset: 0x73FAAF + 1
        size: 1
      - offset: 0x73facc + 1
        size: 1

  - name: Max beginner marker level
    group: Character Limits
    description: |
      Adjust the level when the beginner marker will vanish.
    editable: true
    file: gameserver
    changes:
      - offset: 0x518B99 + 3
        size: 1
  - name: Min level to create parties
    group: Party
    description: |
      Adjust the level the users should be allowed to create parties.
    editable: true
    file: gameserver
    changes:
      - offset: 0x513fec + 1
        size: 1
  - name: Max mastery level (CH)
    group: Character Limits
    description: |
      The max mastery level of CH characters.
    editable: true
    file: gameserver
    changes:
      - offset: 0x59c5e6 + 1
        size: 4
      - offset: 0x6A51BC + 1
        size: 4
        file: sro_client
      - offset: 0x6AA4C3 + 1
        size: 4
        file: sro_client
  - name: Max mastery level (EU)
    group: Character Limits
    description: |
      The max mastery level of EU characters.
    editable: true
    file: sro_client
    changes:
      - offset: 0x6A5197 + 1
        size: 4
      - offset: 0x6A51A2 + 1
        size: 4
      - offset: 0x6AA498 + 1
        size: 4
      - offset: 0x6AA4A3 + 1
        size: 4
      - offset: 0xB46130
        size: 8
        type: double
        file: gameserver
  - name: Cooldown from Universal Pills (ms)
    group: Client Modifications
    description: |
      How often a pill can be taken.
    editable: true
    file: sro_client
    changes:
      - offset: 0x87ABD3 + 1
        size: 4
  - name: Cooldown from Purification Pills (ms)
    group: Client Modifications
    description: |
      How often a pill can be taken.
    editable: true
    file: sro_client
    changes:
      - offset: 0x87AC02 + 1
        size: 4
  - name: Zoom hack
    group: Client Modifications
    description: |
      Activates unlimited zoom.
    editable: false
    file: sro_client
    changes:
      - offset: 0x77B4F3 + 2
        value: "00"
  - name: Auto select range
    group: Client Modifications
    description: |
      Sets the auto select range.
    editable: true
    file: sro_client
    changes:
      - offset: 0xD990A8
        size: 4
        type: float
  - name: Party mobs spawn probability
    group: Party
    description: |
      How often a mob should spawn as party type (in %).
    editable: true
    file: gameserver
    changes:
      - offset: 0x5608e2 + 2
        size: 1
  - name: Party mobs member requirement
    group: Party
    description: |
      How many players need to be in a party for party monster to spawn.
    editable: true
    file: gameserver
    changes:
      - offset: 0x558F20 + 4
        size: 1
  - name: Agent server capacity
    group: Limits
    description: |
      How many players can join the agent server.
    editable: true
    file: gameserver
    changes:
      - offset: 0x4744BC + 1
        size: 4
      - offset: 0x4744C7 + 1
        size: 4
  - name: Remove exchange exploit
    group: Bug Fixes
    description: |
      Removes a cancel attack exploit.
    editable: false
    file: gameserver
    changes:
      # ui based
      - offset: 0x515578
        value: "90 90"
      # paket based
      - offset: 0x515B78
        value: "90 90"
  - name: Remove rates limit (exp, items, gold..)
    group: Limits
    description: |
      There is a limit which prevents values larger than 2500.
    editable: false
    file: gameserver
    changes:
      - offset: 0x42714C + 2
        value: "42"
      - offset: 0x4271F5 + 2
        value: "42"
      - offset: 0x4272A0 + 2
        value: "42"
      - offset: 0x427349 + 2
        value: "42"
  - name: Gameserver spawn limit
    group: Limits
    description: |
      How many mobs can spawn.
    editable: true
    file: gameserver
    changes:
      - offset: 0x54d609 + 1
        size: 4
      - offset: 0x54d61c + 3
        size: 4
      - offset: 0x54d654 + 1
        size: 4
      - offset: 0x54d662 + 2
        size: 4
      - offset: 0x54d6d8 + 2
        size: 4
        formula: "value * 0x1D0"
  - name: Disable Quest:RaiseEvent errors
    group: Performance
    description: |
      Removes the Quest:RaiseEvent errors to reduce load.
    editable: false
    file: gameserver
    changes:
      - offset: 0x5805C8
        value: "90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90"
  - name: Disable green book
    group: Annoyances
    description: |
      Removes the green book from the gameserver.
    editable: false
    file: gameserver
    changes:
      - offset: 0x4142E2
        value: "90 90 90 90 90 90 90 90"
      - offset: 0x41474D
        value: "90 90 90 90 90"
  - name: Disable login captcha
    group: Annoyances
    description: |
      Removes the login captcha.
    editable: false
    file: gateway
    changes:
      - offset: 0x40509c + 1
        value: "30 6e 40"
